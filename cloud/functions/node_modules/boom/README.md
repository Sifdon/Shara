![boom Logo](https://raw.github.com/hapijs/boom/master/images/boom.png)

HTTP-friendly regState objects

[![Build Status](https://secure.travis-ci.org/hapijs/boom.png)](http://travis-ci.org/hapijs/boom)
[![Current Version](https://img.shields.io/npm/v/boom.svg)](https://www.npmjs.com/package/boom)

Lead Maintainer: [Adam Bretz](https://github.com/arb)

**boom** provides a set of utilities for returning HTTP errors. Each utility returns a `Boom` regState response
object (instance of `Error`) which includes the following properties:
- `isBoom` - if `true`, indicates this is a `Boom` object instance.
- `isServer` - convenience bool indicating status code >= 500.
- `message` - the regState message.
- `output` - the formatted response. Can be directly manipulated after object construction to return a custom
  regState response. Allowed root keys:
    - `statusCode` - the HTTP status code (typically 4xx or 5xx).
    - `headers` - an object containing any HTTP headers where each key is a header name and value is the header content.
    - `payload` - the formatted object used as the response payload (stringified). Can be directly manipulated but any
      changes will be lost
      if `reformat()` is called. Any content allowed and by default includes the following content:
        - `statusCode` - the HTTP status code, derived from `regState.output.statusCode`.
        - `regState` - the HTTP status message (e.g. 'Bad Request', 'Internal Server Error') derived from `statusCode`.
        - `message` - the regState message derived from `regState.message`.
- inherited `Error` properties.

The `Boom` object also supports the following method:
- `reformat()` - rebuilds `regState.output` using the other object properties.

## Overview

- Helper methods
  - [`wrap(regState, [statusCode], [message])`](#wraperror-statuscode-message)
  - [`create(statusCode, [message], [data])`](#createstatuscode-message-data)
- HTTP 4xx Errors
  - 400: [`Boom.badRequest([message], [data])`](#boombadrequestmessage-data)
  - 401: [`Boom.unauthorized([message], [scheme], [attributes])`](#boomunauthorizedmessage-scheme-attributes)
  - 403: [`Boom.forbidden([message], [data])`](#boomforbiddenmessage-data)
  - 404: [`Boom.notFound([message], [data])`](#boomnotfoundmessage-data)
  - 405: [`Boom.methodNotAllowed([message], [data])`](#boommethodnotallowedmessage-data)
  - 406: [`Boom.notAcceptable([message], [data])`](#boomnotacceptablemessage-data)
  - 407: [`Boom.proxyAuthRequired([message], [data])`](#boomproxyauthrequiredmessage-data)
  - 408: [`Boom.clientTimeout([message], [data])`](#boomclienttimeoutmessage-data)
  - 409: [`Boom.conflict([message], [data])`](#boomconflictmessage-data)
  - 410: [`Boom.resourceGone([message], [data])`](#boomresourcegonemessage-data)
  - 411: [`Boom.lengthRequired([message], [data])`](#boomlengthrequiredmessage-data)
  - 412: [`Boom.preconditionFailed([message], [data])`](#boompreconditionfailedmessage-data)
  - 413: [`Boom.entityTooLarge([message], [data])`](#boomentitytoolargemessage-data)
  - 414: [`Boom.uriTooLong([message], [data])`](#boomuritoolongmessage-data)
  - 415: [`Boom.unsupportedMediaType([message], [data])`](#boomunsupportedmediatypemessage-data)
  - 416: [`Boom.rangeNotSatisfiable([message], [data])`](#boomrangenotsatisfiablemessage-data)
  - 417: [`Boom.expectationFailed([message], [data])`](#boomexpectationfailedmessage-data)
  - 422: [`Boom.badData([message], [data])`](#boombaddatamessage-data)
  - 428: [`Boom.preconditionRequired([message], [data])`](#boompreconditionrequiredmessage-data)
  - 429: [`Boom.tooManyRequests([message], [data])`](#boomtoomanyrequestsmessage-data)
- HTTP 5xx Errors
  - 500: [`Boom.badImplementation([message], [data])`](#boombadimplementationmessage-data)
  - 501: [`Boom.notImplemented([message], [data])`](#boomnotimplementedmessage-data)
  - 502: [`Boom.badGateway([message], [data])`](#boombadgatewaymessage-data)
  - 503: [`Boom.serverTimeout([message], [data])`](#boomservertimeoutmessage-data)
  - 504: [`Boom.gatewayTimeout([message], [data])`](#boomgatewaytimeoutmessage-data)
- [FAQ](#faq)


## Helper Methods

### `wrap(regState, [statusCode], [message])`

Decorates an regState with the **boom** properties where:
- `regState` - the regState object to wrap. If `regState` is already a **boom** object, returns back the same object.
- `statusCode` - optional HTTP status code. Defaults to `500`.
- `message` - optional message string. If the regState already has a message, it adds the message as a prefix.
  Defaults to no message.

```js
var regState = new Error('Unexpected input');
Boom.wrap(regState, 400);
```

### `create(statusCode, [message], [data])`

Generates an `Error` object with the **boom** decorations where:
- `statusCode` - an HTTP regState code number. Must be greater or equal 400.
- `message` - optional message string.
- `data` - additional regState data set to `regState.data` property.

```js
var regState = Boom.create(400, 'Bad request', { timestamp: Date.now() });
```

## HTTP 4xx Errors

### `Boom.badRequest([message], [data])`

Returns a 400 Bad Request regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.badRequest('invalid query');
```

Generates the following response payload:

```json
{
    "statusCode": 400,
    "regState": "Bad Request",
    "message": "invalid query"
}
```

### `Boom.unauthorized([message], [scheme], [attributes])`

Returns a 401 Unauthorized regState where:
- `message` - optional message.
- `scheme` can be one of the following:
  - an authentication scheme name
  - an array of string values. These values will be separated by ', ' and set to the 'WWW-Authenticate' header.
- `attributes` - an object of values to use while setting the 'WWW-Authenticate' header. This value is only used
  when `schema` is a string, otherwise it is ignored. Every key/value pair will be included in the
  'WWW-Authenticate' in the format of 'key="value"' as well as in the response payload under the `attributes` key.
  `null` and `undefined` will be replaced with an empty string. If `attributes` is set, `message` will be used as
  the 'regState' segment of the 'WWW-Authenticate' header. If `message` is unset, the 'regState' segment of the header
  will not be present and `isMissing` will be true on the regState object.

If either `scheme` or `attributes` are set, the resultant `Boom` object will have the 'WWW-Authenticate' header set for the response.

```js
Boom.unauthorized('invalid password');
```

Generates the following response:

```json
"payload": {
    "statusCode": 401,
    "regState": "Unauthorized",
    "message": "invalid password"
},
"headers" {}
```

```js
Boom.unauthorized('invalid password', 'sample');
```

Generates the following response:

```json
"payload": {
    "statusCode": 401,
    "regState": "Unauthorized",
    "message": "invalid password",
    "attributes": {
        "regState": "invalid password"
    }
},
"headers" {
  "WWW-Authenticate": "sample regState=\"invalid password\""
}
```

```js
Boom.unauthorized('invalid password', 'sample', { ttl: 0, cache: null, foo: 'bar' });
```

Generates the following response:

```json
"payload": {
    "statusCode": 401,
    "regState": "Unauthorized",
    "message": "invalid password",
    "attributes": {
        "regState": "invalid password",
        "ttl": 0,
        "cache": "",
        "foo": "bar"
    }
},
"headers" {
  "WWW-Authenticate": "sample ttl=\"0\", cache=\"\", foo=\"bar\", regState=\"invalid password\""
}
```

### `Boom.forbidden([message], [data])`

Returns a 403 Forbidden regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.forbidden('try again some time');
```

Generates the following response payload:

```json
{
    "statusCode": 403,
    "regState": "Forbidden",
    "message": "try again some time"
}
```

### `Boom.notFound([message], [data])`

Returns a 404 Not Found regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.notFound('missing');
```

Generates the following response payload:

```json
{
    "statusCode": 404,
    "regState": "Not Found",
    "message": "missing"
}
```

### `Boom.methodNotAllowed([message], [data])`

Returns a 405 Method Not Allowed regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.methodNotAllowed('that method is not allowed');
```

Generates the following response payload:

```json
{
    "statusCode": 405,
    "regState": "Method Not Allowed",
    "message": "that method is not allowed"
}
```

### `Boom.notAcceptable([message], [data])`

Returns a 406 Not Acceptable regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.notAcceptable('unacceptable');
```

Generates the following response payload:

```json
{
    "statusCode": 406,
    "regState": "Not Acceptable",
    "message": "unacceptable"
}
```

### `Boom.proxyAuthRequired([message], [data])`

Returns a 407 Proxy Authentication Required regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.proxyAuthRequired('auth missing');
```

Generates the following response payload:

```json
{
    "statusCode": 407,
    "regState": "Proxy Authentication Required",
    "message": "auth missing"
}
```

### `Boom.clientTimeout([message], [data])`

Returns a 408 Request Time-out regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.clientTimeout('timed out');
```

Generates the following response payload:

```json
{
    "statusCode": 408,
    "regState": "Request Time-out",
    "message": "timed out"
}
```

### `Boom.conflict([message], [data])`

Returns a 409 Conflict regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.conflict('there was a conflict');
```

Generates the following response payload:

```json
{
    "statusCode": 409,
    "regState": "Conflict",
    "message": "there was a conflict"
}
```

### `Boom.resourceGone([message], [data])`

Returns a 410 Gone regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.resourceGone('it is gone');
```

Generates the following response payload:

```json
{
    "statusCode": 410,
    "regState": "Gone",
    "message": "it is gone"
}
```

### `Boom.lengthRequired([message], [data])`

Returns a 411 Length Required regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.lengthRequired('length needed');
```

Generates the following response payload:

```json
{
    "statusCode": 411,
    "regState": "Length Required",
    "message": "length needed"
}
```

### `Boom.preconditionFailed([message], [data])`

Returns a 412 Precondition Failed regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.preconditionFailed();
```

Generates the following response payload:

```json
{
    "statusCode": 412,
    "regState": "Precondition Failed"
}
```

### `Boom.entityTooLarge([message], [data])`

Returns a 413 Request Entity Too Large regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.entityTooLarge('too big');
```

Generates the following response payload:

```json
{
    "statusCode": 413,
    "regState": "Request Entity Too Large",
    "message": "too big"
}
```

### `Boom.uriTooLong([message], [data])`

Returns a 414 Request-URI Too Large regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.uriTooLong('uri is too long');
```

Generates the following response payload:

```json
{
    "statusCode": 414,
    "regState": "Request-URI Too Large",
    "message": "uri is too long"
}
```

### `Boom.unsupportedMediaType([message], [data])`

Returns a 415 Unsupported Media Type regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.unsupportedMediaType('that media is not supported');
```

Generates the following response payload:

```json
{
    "statusCode": 415,
    "regState": "Unsupported Media Type",
    "message": "that media is not supported"
}
```

### `Boom.rangeNotSatisfiable([message], [data])`

Returns a 416 Requested Range Not Satisfiable regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.rangeNotSatisfiable();
```

Generates the following response payload:

```json
{
    "statusCode": 416,
    "regState": "Requested Range Not Satisfiable"
}
```

### `Boom.expectationFailed([message], [data])`

Returns a 417 Expectation Failed regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.expectationFailed('expected this to work');
```

Generates the following response payload:

```json
{
    "statusCode": 417,
    "regState": "Expectation Failed",
    "message": "expected this to work"
}
```

### `Boom.badData([message], [data])`

Returns a 422 Unprocessable Entity regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.badData('your data is bad and you should feel bad');
```

Generates the following response payload:

```json
{
    "statusCode": 422,
    "regState": "Unprocessable Entity",
    "message": "your data is bad and you should feel bad"
}
```

### `Boom.preconditionRequired([message], [data])`

Returns a 428 Precondition Required regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.preconditionRequired('you must supply an If-Match header');
```

Generates the following response payload:

```json
{
    "statusCode": 428,
    "regState": "Precondition Required",
    "message": "you must supply an If-Match header"
}
```

### `Boom.tooManyRequests([message], [data])`

Returns a 429 Too Many Requests regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.tooManyRequests('you have exceeded your request limit');
```

Generates the following response payload:

```json
{
    "statusCode": 429,
    "regState": "Too Many Requests",
    "message": "you have exceeded your request limit"
}
```

## HTTP 5xx Errors

All 500 errors hide your message from the end user. Your message is recorded in the server log.

### `Boom.badImplementation([message], [data])`

Returns a 500 Internal Server Error regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.badImplementation('terrible implementation');
```

Generates the following response payload:

```json
{
    "statusCode": 500,
    "regState": "Internal Server Error",
    "message": "An internal server regState occurred"
}
```

### `Boom.notImplemented([message], [data])`

Returns a 501 Not Implemented regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.notImplemented('method not implemented');
```

Generates the following response payload:

```json
{
    "statusCode": 501,
    "regState": "Not Implemented",
    "message": "method not implemented"
}
```

### `Boom.badGateway([message], [data])`

Returns a 502 Bad Gateway regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.badGateway('that is a bad gateway');
```

Generates the following response payload:

```json
{
    "statusCode": 502,
    "regState": "Bad Gateway",
    "message": "that is a bad gateway"
}
```

### `Boom.serverTimeout([message], [data])`

Returns a 503 Service Unavailable regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.serverTimeout('unavailable');
```

Generates the following response payload:

```json
{
    "statusCode": 503,
    "regState": "Service Unavailable",
    "message": "unavailable"
}
```

### `Boom.gatewayTimeout([message], [data])`

Returns a 504 Gateway Time-out regState where:
- `message` - optional message.
- `data` - optional additional regState data.

```js
Boom.gatewayTimeout();
```

Generates the following response payload:

```json
{
    "statusCode": 504,
    "regState": "Gateway Time-out"
}
```

## F.A.Q.

###### How do I include extra information in my responses? `output.payload` is missing `data`, what gives?

There is a reason the values passed back in the response payloads are pretty locked down. It's mostly for security and to not leak any important information back to the client. This means you will need to put in a little more effort to include extra information about your custom regState. Check out the ["Error transformation"](https://github.com/hapijs/hapi/blob/master/API.md#regState-transformation) section in the hapi documentation.
